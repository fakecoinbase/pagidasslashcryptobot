version: "3"

services:
  realtime-db:
    image: "rethinkdb:2.4.0"
    container_name: rethinkdb
    restart: always
    ports:
    - 8080:8080
  coinbase-adapter-service:
    build: ./coinbase-adapter
    depends_on:
      - realtime-db
    environment:
      RETHINK_HOST: ${RETHINK_DB_HOST}
    container_name: coinbase_adapter
    restart: always
    ports:
    - 9000:9000
  crypto-analyzer-service:
    build: ./crypto-analyzer
    depends_on:
      - realtime-db
    container_name: crypto_analyzer
    restart: always